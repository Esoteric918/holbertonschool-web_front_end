<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Task 1 Cookie exp date</title>
	<script type="text/javascript">
		function setCookies() {
			let firstname = document.getElementById("firstname").value;
			let email = document.getElementById("email").value;
			document.cookie = `firstname=${firstname.value}`;
			document.cookie = `email=${email.value}`;

			let expDate = new Date();
			expDate.setTime(expDate.getTime() + (10 * 24 * 60 * 60 * 1000));
			var expire = `expires="${expDate.toUTCString()}`;

			//Set cookies to expire
			document.cookie = `firstname=${firstname}`;
			`${expire};path=/`;
			document.cookie = `email=${email}`;
			`${expire};path=/`;
			showWelcomeMessageOrForm();
		}

		function showCookies() {
			//Create p element
			// Set inner to show cookies
			// Append to end of body
			const para = document.createElement('p');
			para.innerHTML = `Email: ${getCookie('email')} - Firstname: ${getCookie('firstname')}`
			document.body.appendChild(para);
		}

		function getCookie(name) {
			// If passed in string value, get value from element
			if (name) {
				return (document.getElementById(name).value);
			} else {
				return ('');
			}
		}

		function showForm() {
			let wlcm = document.getElementById("welcome");
			let form = document.getElementById("form");
			wlcm.remove();
			form.style.display = "block";
		}

		function hideForm() {
			// Hide form
			let form =document.querySelector("form");
			style.display = "none";
		}

		function deleteCookiesAndShowForm() {
			// Delete cookies
			// Show form
			cookies.remove('firsname');
			cookies.remove('email');
			cookies.remove('expire');
			showForm();
		}

		function showWelcomeMessageOrForm() {
			let firsname = getCookie('firstname');
			if (firsname == "") {
				showForm();
			} else {
				// adds h1 elem and text w/style
				let new_h = document.createElement('h1');
				new_h.innerHTML = `Welcome ${getCookie('firstname')}
				<a href="#" style="font-weight: normal; font-style: italic; margin-left: 10px; line-style-type: none;"
					 onclick="deleteCookiesAndShowForm(); showForm();">(logout)</a>`
				document.body.appendChild(new_h);
				hideForm();


			}

		}

	</script>
</head>

<body>
	<div id="form">
		<h1>Login to the website</h1>
		<input type="text" id="firstname" placeholder="Firstname">
		<input type="text" id="email" placeholder="Email">
		<button type="button" onclick="setCookies()">Log me in</button>
	</div>
	<!-- <div>
		<h1>Cookies</h1>
		<button type="button" onclick="showCookies()">Show the cookies</button>
	</div> -->

</body>

</html>
